
Running 6 tests using 6 workers

[1A[2K[1/6] [authenticated] â€º tests/auth/authenticated-user.test.ts:35:7 â€º Authenticated User Tests â€º should be able to access protected routes
[1A[2K[2/6] [authenticated] â€º tests/auth/authenticated-user.test.ts:52:7 â€º Authenticated User Tests â€º should be able to create a new chat
[1A[2K[3/6] [authenticated] â€º tests/auth/storage-state-demo.test.ts:26:7 â€º Storage State Demo Tests â€º should show storage state configuration
[1A[2K[4/6] [authenticated] â€º tests/auth/authenticated-user.test.ts:8:7 â€º Authenticated User Tests â€º should have access to main chat interface
[1A[2K[5/6] [authenticated] â€º tests/auth/storage-state-demo.test.ts:4:7 â€º Storage State Demo Tests â€º should demonstrate storage state usage
[1A[2K[6/6] [authenticated] â€º tests/auth/authenticated-user.test.ts:73:7 â€º Authenticated User Tests â€º should persist authentication across page reloads
[1A[2K[authenticated] â€º tests/auth/storage-state-demo.test.ts:26:7 â€º Storage State Demo Tests â€º should show storage state configuration
Storage State Configuration:

[1A[2K- Cookies: [33m1[39m

[1A[2K- Origins: [33m1[39m

[1A[2K[authenticated] â€º tests/auth/storage-state-demo.test.ts:4:7 â€º Storage State Demo Tests â€º should demonstrate storage state usage
Context storage state: {
  cookies: [
    {
      name: [32m'next-auth.session-token'[39m,
      value: [32m'mock-session-token-1754968123186'[39m,
      domain: [32m'localhost'[39m,
      path: [32m'/'[39m,
      expires: [33m1755054523.186[39m,
      httpOnly: [33mtrue[39m,
      secure: [33mfalse[39m,
      sameSite: [32m'Lax'[39m
    }
  ],
  origins: [ { origin: [32m'http://localhost:3000'[39m, localStorage: [36m[Array][39m } ]
}

[1A[2K  1) [authenticated] â€º tests/auth/authenticated-user.test.ts:8:7 â€º Authenticated User Tests â€º should have access to main chat interface 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mnot[2m.[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected substring: not [32m"/login"[39m
    Received string:        [31m"http://localhost:3000[7m/login[27m"[39m

      11 |     
      12 |     // Should not be redirected to login page
    > 13 |     expect(page.url()).not.toContain('/login');
         |                            ^
      14 |     
      15 |     // Should see the main chat interface
      16 |     await expect(page.locator('main')).toBeVisible();
        at /Users/thomasjeon/GitHub/@ai.thothy/Fictures/tests/auth/authenticated-user.test.ts:13:28

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-authenticated-user-Au-7e9b1-cess-to-main-chat-interface-authenticated/trace.zip
    Usage:

        npx playwright show-trace test-results/auth-authenticated-user-Au-7e9b1-cess-to-main-chat-interface-authenticated/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K  2) [authenticated] â€º tests/auth/authenticated-user.test.ts:35:7 â€º Authenticated User Tests â€º should be able to access protected routes 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mnot[2m.[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected substring: not [32m"/login"[39m
    Received string:        [31m"http://localhost:3000[7m/login[27m"[39m

      38 |     
      39 |     // Should not be redirected to login
    > 40 |     expect(page.url()).not.toContain('/login');
         |                            ^
      41 |     
      42 |     // Should be able to access API endpoints (check session)
      43 |     const response = await page.request.get('/api/auth/session');
        at /Users/thomasjeon/GitHub/@ai.thothy/Fictures/tests/auth/authenticated-user.test.ts:40:28

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-authenticated-user-Au-ec697--to-access-protected-routes-authenticated/trace.zip
    Usage:

        npx playwright show-trace test-results/auth-authenticated-user-Au-ec697--to-access-protected-routes-authenticated/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K[authenticated] â€º tests/auth/storage-state-demo.test.ts:26:7 â€º Storage State Demo Tests â€º should show storage state configuration
Session data: [1mnull[22m

[1A[2K  3) [authenticated] â€º tests/auth/authenticated-user.test.ts:73:7 â€º Authenticated User Tests â€º should persist authentication across page reloads 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mnot[2m.[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected substring: not [32m"/login"[39m
    Received string:        [31m"http://localhost:3000[7m/login[27m"[39m

      78 |     
      79 |     // Should still be authenticated
    > 80 |     expect(page.url()).not.toContain('/login');
         |                            ^
      81 |     
      82 |     // Should still see authenticated content
      83 |     await expect(page.locator('main')).toBeVisible();
        at /Users/thomasjeon/GitHub/@ai.thothy/Fictures/tests/auth/authenticated-user.test.ts:80:28

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-authenticated-user-Au-ade68-ication-across-page-reloads-authenticated/trace.zip
    Usage:

        npx playwright show-trace test-results/auth-authenticated-user-Au-ade68-ication-across-page-reloads-authenticated/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K  4) [authenticated] â€º tests/auth/storage-state-demo.test.ts:4:7 â€º Storage State Demo Tests â€º should demonstrate storage state usage 

    Error: page.waitForTimeout: Target page, context or browser has been closed

      11 |     // The storage state should prevent redirect to login
      12 |     // (This test shows how storage state would work)
    > 13 |     await page.waitForTimeout(2000);
         |                ^
      14 |     
      15 |     // Log the current URL to see where we end up
      16 |     console.log('Current URL:', page.url());
        at /Users/thomasjeon/GitHub/@ai.thothy/Fictures/tests/auth/storage-state-demo.test.ts:13:16

    attachment #1: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-storage-state-demo-St-91882-nstrate-storage-state-usage-authenticated/trace.zip
    Usage:

        npx playwright show-trace test-results/auth-storage-state-demo-St-91882-nstrate-storage-state-usage-authenticated/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K  5) [authenticated] â€º tests/auth/authenticated-user.test.ts:52:7 â€º Authenticated User Tests â€º should be able to create a new chat 

    Error: expect.toBeVisible: Target page, context or browser has been closed

      67 |     } catch {
      68 |       // If no specific new chat button, just verify we can access the main interface
    > 69 |       await expect(page.locator('main')).toBeVisible();
         |                                          ^
      70 |     }
      71 |   });
      72 |
        at /Users/thomasjeon/GitHub/@ai.thothy/Fictures/tests/auth/authenticated-user.test.ts:69:42

    attachment #1: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-authenticated-user-Au-e0f5b-e-able-to-create-a-new-chat-authenticated/trace.zip
    Usage:

        npx playwright show-trace test-results/auth-authenticated-user-Au-e0f5b-e-able-to-create-a-new-chat-authenticated/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K  5 failed
    [authenticated] â€º tests/auth/authenticated-user.test.ts:8:7 â€º Authenticated User Tests â€º should have access to main chat interface 
    [authenticated] â€º tests/auth/authenticated-user.test.ts:35:7 â€º Authenticated User Tests â€º should be able to access protected routes 
    [authenticated] â€º tests/auth/authenticated-user.test.ts:52:7 â€º Authenticated User Tests â€º should be able to create a new chat 
    [authenticated] â€º tests/auth/authenticated-user.test.ts:73:7 â€º Authenticated User Tests â€º should persist authentication across page reloads 
    [authenticated] â€º tests/auth/storage-state-demo.test.ts:4:7 â€º Storage State Demo Tests â€º should demonstrate storage state usage 
  1 passed (7.4s)

[36m  Serving HTML report at http://localhost:57416. Press Ctrl+C to quit.[39m
